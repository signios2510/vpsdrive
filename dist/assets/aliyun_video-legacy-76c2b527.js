System.register(["./index-legacy-525baae1.js","./useUtil-legacy-a03a4c8a.js","./icon-legacy-11d96fdd.js","./hls-legacy-c6383872.js","./Layout-legacy-4b30e508.js","./api-legacy-f796fb21.js","./index-legacy-1cd78d63.js","./index-legacy-899e752b.js","./Markdown-legacy-2248efe9.js","./index-legacy-e2bf1d6e.js","./FolderTree-legacy-982bd674.js"],(function(e,t){"use strict";var a,n,o,r,l,i,s,c,d,u,p,y,f,g,m,h,b,v,j,w,k,x,_;return{setters:[e=>{a=e.u,n=e.o,o=e.aq,r=e.cp,l=e.bF,i=e.a,s=e.b6,c=e._,d=e.av,u=e.bd,p=e.n,y=e.ar,f=e.f,g=e.W,m=e.Y,h=e.aP,b=e.Z},e=>{v=e.a},e=>{j=e.O},e=>{w=e.H,k=e.a,x=e.A},e=>{_=e.c},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{}],execute:function(){e("default",(()=>{const{replace:e}=a(),{proxyLink:t}=v();let F,W=n.objs.filter((e=>e.type===j.VIDEO));0===W.length&&(W=[n.obj]);let L={id:"player",container:"#video-player",title:n.obj.name,volume:.5,autoplay:o("video_autoplay"),autoSize:!1,autoMini:!0,loop:!1,flip:!0,playbackRate:!0,aspectRatio:!0,setting:!0,hotkey:!0,pip:!0,mutex:!0,fullscreen:!0,fullscreenWeb:!0,subtitleOffset:!0,miniProgressBar:!1,playsInline:!0,quality:[],plugins:[],whitelist:[],moreVideoAttr:{"webkit-playsinline":!0,playsInline:!0},type:"m3u8",customType:{m3u8:function(e,t){const a=new w;a.loadSource(t),a.attachMedia(e),e.src||(e.src=t)}},lang:["en","zh-cn","zh-tw"].includes(r().toLowerCase())?r().toLowerCase():"en",lock:!0,fastForward:!0,autoPlayback:!0,autoOrientation:!0,airplay:!0};_&&(L.moreVideoAttr.controls=!0);const O=n.related.find((e=>{for(const t of[".srt",".ass",".vtt"])if(e.name.endsWith(t))return!0;return!1})),z=n.related.find((e=>{for(const t of[".xml"])if(e.name.endsWith(t))return!0;return!1}));O&&(L.subtitle={url:t(O,!0),type:l(O.name)}),z&&(L.plugins=[k({danmuku:t(z,!0),speed:5,opacity:1,fontSize:25,color:"#FFFFFF",mode:0,margin:[0,"0%"],antiOverlap:!1,useWorker:!0,synchronousPlayback:!1,lockTime:5,maxLength:100,minWidth:200,maxWidth:400,theme:"dark"})]);const{pathname:I}=a(),[P,S]=i((()=>s.post("/fs/other",{path:I(),password:c(),method:"video_preview"})));return d((async()=>{const t=await S();u(t,(t=>{const a=t.video_preview_play_info.live_transcoding_task_list.filter((e=>e.url));0!==a.length?(L.url=a[a.length-1].url,L.quality=a.map(((e,t)=>({html:e.template_id,url:e.url,default:t===a.length-1}))),F=new x(L),F.on("video:ended",(()=>{const t=W.findIndex((e=>e.name===n.obj.name));t<W.length-1&&e(W[t+1].name)}))):p.error("No transcoding video found")}))})),y((()=>{F?.destroy()})),f(b,{get loading(){return P()},get children(){return f(g,{w:"$full",spacing:"$2",get children(){return[f(m,{w:"$full",h:"60vh",id:"video-player"}),f(h,{onChange:t=>{e(t)},get value(){return n.obj.name},get options(){return W.map((e=>({value:e.name})))}})]}})}})}))}}}));
