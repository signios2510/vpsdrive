System.register(["./index-legacy-525baae1.js","./index-legacy-1cd78d63.js","./Markdown-legacy-2248efe9.js","./api-legacy-f796fb21.js","./useUtil-legacy-a03a4c8a.js","./index-legacy-899e752b.js","./index-legacy-e2bf1d6e.js","./FolderTree-legacy-982bd674.js"],(function(e,t){"use strict";var n,r,o,i,a,l,s,c,u,d,h,g,p,f,m,y,w,b,v,$,k,x,S,C,_,O,M,E,j,A,F,T,P,D,R,I,V,L,z,B,U,q,H,N,W,K,X,Y,Z,G,J,Q,ee,te,ne,re,oe,ie,ae,le,se,ce,ue,de,he,ge,pe,fe,me,ye,we,be,ve,$e,ke,xe,Se,Ce,_e,Oe,Me,Ee,je,Ae,Fe,Te,Pe,De,Re,Ie,Ve,Le,ze,Be,Ue,qe,He,Ne,We,Ke,Xe,Ye,Ze,Ge,Je,Qe,et,tt,nt,rt,ot,it,at,lt,st,ct,ut,dt,ht,gt,pt,ft,mt,yt,wt,bt,vt,$t,kt,xt,St,Ct,_t,Ot,Mt,Et,jt,At,Ft,Tt,Pt,Dt,Rt,It,Vt,Lt,zt;return{setters:[e=>{n=e.u,r=e.a,o=e._,i=e.g,a=e.b,l=e.o,s=e.p,c=e.O,u=e.S,d=e.h,h=e.c,g=e.n,p=e.d,f=e.s,m=e.l,y=e.e,w=e.f,b=e.M,v=e.i,$=e.j,k=e.k,x=e.m,S=e.I,C=e.T,_=e.F,O=e.q,M=e.B,E=e.r,j=e.t,A=e.v,F=e.w,T=e.x,P=e.y,D=e.z,R=e.L,I=e.A,V=e.C,L=e.D,z=e.E,B=e.G,U=e.H,q=e.J,H=e.K,N=e.N,W=e.P,K=e.Q,X=e.R,Y=e.U,Z=e.V,G=e.W,J=e.X,Q=e.Y,ee=e.Z,te=e.$,ne=e.a0,re=e.a1,oe=e.a2,ie=e.a3,ae=e.a4,le=e.a5,se=e.a6,ce=e.a7,ue=e.a8,de=e.a9,he=e.aa,ge=e.ab,pe=e.ac,fe=e.ad,me=e.ae,ye=e.af,we=e.ag,be=e.ah,ve=e.ai,$e=e.aj,ke=e.ak,xe=e.al,Se=e.am,Ce=e.an,_e=e.ao,Oe=e.ap,Me=e.aq,Ee=e.ar,je=e.as,Ae=e.at,Fe=e.au,Te=e.av,Pe=e.aw,De=e.ax,Re=e.ay,Ie=e.az,Ve=e.aA,e.aB,Le=e.aC,ze=e.aD,Be=e.aE,Ue=e.aF,qe=e.aG,He=e.aH,Ne=e.aI,We=e.aJ,Ke=e.aK,Xe=e.aL,Ye=e.aM,Ze=e.aN,Ge=e.aO,Je=e.aP,Qe=e.aQ,et=e.aR,tt=e.aS,nt=e.aT,rt=e.aU,ot=e.aV,it=e.aW,at=e.aX,lt=e.aY,st=e.aZ,ct=e.a_,ut=e.a$,dt=e.b0,ht=e.b1},e=>{gt=e.u,pt=e.B,ft=e.a,mt=e.b,yt=e.c},e=>{wt=e.M},e=>{bt=e.f,vt=e.a,$t=e.b,kt=e.c,xt=e.d,St=e.e,Ct=e.g,_t=e.h,Ot=e.i,Mt=e.o},e=>{Et=e.u,jt=e.a,At=e.b},e=>{Ft=e.A,Tt=e.F,Pt=e.C,Dt=e.a,Rt=e.b,It=e.T,Vt=e.c},e=>{Lt=e.R},e=>{zt=e.M}],execute:function(){e("b",Ht);const Bt=new Map,Ut=e=>{window.scroll({top:Bt.get(e)||0,behavior:"smooth"}),Bt.get(e)};let qt;function Ht(e,t,n="replaceState"){let r="location"===n?location.href:location.hash;if(r.includes("?"))if(r.includes(e)){const n=`(\\?|&|#)${e}([^&|^#]*)(&|$|#)`;r=r.replace(new RegExp(n),"$1"+e+"="+t+"$3")}else r=`${r}&${e}=${t}`;else r=`${r}?${e}=${t}`;"location"===n&&(location.href=r),"pushState"===n&&history.pushState({},"",r),"replaceState"===n&&history.replaceState({},"",r)}function Nt(e){for(var t=window.location.search.substring(1).split("&"),n=0;n<t.length;n++){var r=t[n].split("=");if(r[0]==e)return r[1]}return""}const Wt={};let Kt=1;e("g",(()=>Kt));const Xt=e("a",(()=>{const{pathname:e}=n(),[,t]=r((e=>bt(e,o()))),p=i();"pagination"===p.type&&Nt("page")&&(Kt=parseInt(Nt("page")));const[,f]=r((e=>{const t={index:e?.index,size:e?.size};return vt(e?.path,o(),t.index,t.size,e?.force,new a.CancelToken((function(e){qt=e})))})),m=(t,n=!0,r=!1)=>{r&&(t=s(e(),t)),n?Wt[t]=!0:delete Wt[t]};let y=!1;const w=(e,t,n)=>{qt?.(),y=t??!1,$(""),Wt[e]?v(e,Kt,void 0,void 0,n):b(e)},b=async e=>{c.setState(u.FetchingObj);const n=await t(e);d(n,(t=>{c.setObj(t),c.setProvider(t.provider),t.is_dir?(m(e),v(e,Kt)):(c.setReadme(t.readme),c.setRelated(t.related??[]),c.setRawUrl(t.raw_url),c.setState(u.File))}),$)},v=async(e,t,n,r=!1,o)=>{n||(n=p.size),void 0!==n&&"all"===p.type&&(n=void 0),Kt=t??1,c.setState(r?u.FetchingMore:u.FetchingObjs);const i=await f({path:e,index:t,size:n,force:o});d(i,(n=>{r?h(n.content):(c.setObjs(n.content??[]),c.setTotal(n.total)),c.setReadme(n.readme),c.setWrite(n.write),c.setProvider(n.provider),c.setState(u.Folder),r&&(t??1)>1||Ut(e)}),$)},$=(e,t)=>{403===t?(c.setState(u.NeedPassword),y&&g.error(e)):c.setErr(e)},k=(t,n,r=!1)=>{v(e(),t,n,r)};return{handlePathChange:w,setPathAs:m,refresh:(t,n)=>{w(e(),t,n)},pageChange:k,loadMore:()=>{k(Kt+1,void 0,!0)},allLoaded:()=>Kt>=Math.ceil(l.total/p.size)}})),Yt=e("u",(()=>{const{rawLinks:e}=Et(),{rawLink:t}=jt(),n=p();return{batchDownloadSelected:()=>{e(!0).forEach((e=>{window.open(e,"_blank")}))},sendToAria2:async()=>{const e=f().filter((e=>!e.is_dir)),{aria2_rpc_url:r,aria2_rpc_secret:o,aria2_dir:i}=m;if(r)try{for(const n of e){const e=await a.post(r,{id:Math.random().toString(),jsonrpc:"2.0",method:"aria2.addUri",params:["token:"+o,[t(n)],{out:n.name,"check-certificate":"false"}]});console.log(e)}g.success(n("home.toolbar.send_aria2_success"))}catch(l){console.error(l),g.error(`failed to send to aria2: ${l}`)}else g.warning(n("home.toolbar.aria2_not_set"))}}})),Zt=e=>{const[t,n]=y(e.defaultValue??""),r=p(),o=()=>{t()?(e.onSubmit?.(t()),n("")):g.warning(r("global.empty_input"))};return w(E,{blockScrollOnMount:!1,get opened(){return e.opened},get onClose(){return e.onClose},initialFocus:"#modal-input",get children(){return[w(b,{}),w(v,{get children(){return[w($,{get children(){return r(e.title)}}),w(k,{get children(){return[w(x,{get when(){return e.topSlot},get children(){return e.topSlot}}),w(x,{get when(){return"text"===e.type},get fallback(){return w(S,{id:"modal-input",get type(){return e.type},get value(){return t()},onInput:e=>{n(e.currentTarget.value)},onKeyDown:e=>{"Enter"===e.key&&o()}})},get children(){return w(C,{id:"modal-input",get value(){return t()},onInput:e=>{n(e.currentTarget.value)}})}}),w(x,{get when(){return e.tips},get children(){return w(_,{get children(){return e.tips}})}})]}}),w(O,{display:"flex",gap:"$2",get children(){return[w(M,{get onClick(){return e.onClose},colorScheme:"neutral",get children(){return r("global.cancel")}}),w(M,{get loading(){return e.loading},onClick:()=>o(),get children(){return r("global.ok")}})]}})]}})]}})},Gt=()=>{const{pathname:e}=n(),t=j((()=>["",...e().split("/").filter(Boolean)])),r=p(),{setPathAs:o}=Xt();return w(L,{class:"nav",w:"$full",get children(){return w(A,{get each(){return t()},children:(e,n)=>{const i=j((()=>n()===t().length-1)),a=t().slice(0,n()+1).join("/"),l=F(a);let s=()=>e;return""===s()&&(s=()=>z("home_icon")+r("manage.sidemenu.home")),w(T,{class:"nav-item",get children(){return[w(P,{class:"nav-link",css:{wordBreak:"break-all"},color:"unset",get _hover(){return{bgColor:D(),color:"unset"}},_active:{transform:"scale(.95)",transition:"0.1s"},cursor:"pointer",p:"$1",rounded:"$lg",get currentPage(){return i()},get as(){return i()?void 0:R},get href(){return I(l)},onMouseEnter:()=>o(a),children:s}),w(x,{get when(){return!i()},get children(){return w(V,{class:"nav-separator"})}})]}})}})}})},Jt=B((()=>U((()=>t.import("./Folder-legacy-4719750a.js").then((e=>e.F))),void 0))),Qt=B((()=>U((()=>t.import("./File-legacy-77367947.js").then((e=>e.a))),void 0))),en=B((()=>U((()=>t.import("./Password-legacy-88349baa.js")),void 0)));let tn=!0;const nn=()=>{const e=q("white","$neutral3"),{pathname:t}=n(),{handlePathChange:r}=Xt();let o=t();return H(N(t,(e=>{var t,n;gt(),tn||(()=>{const e=i();Kt=1,"pagination"===e.type&&Ht("page",1),console.log("resetGlobalPage",Kt)})(),tn=!1,t=o,n=window.scrollY,Bt.set(t,n),r(e),o=e}))),w(G,{class:"obj-box",w:"$full",rounded:"$xl",get bgColor(){return e()},p:"$2",shadow:"$lg",spacing:"$2",get children(){return w(W,{get fallback(){return w(K,{})},get children(){return w(X,{get children(){return[w(Y,{get when(){return l.err},get children(){return w(Z,{get msg(){return l.err},disableColor:!0})}}),w(Y,{get when(){return[u.FetchingObj,u.FetchingObjs].includes(l.state)},get children(){return w(K,{})}}),w(Y,{get when(){return l.state===u.NeedPassword},get children(){return w(en,{})}}),w(Y,{get when(){return[u.Folder,u.FetchingMore].includes(l.state)},get children(){return w(Jt,{})}}),w(Y,{get when(){return l.state===u.File},get children(){return w(Qt,{})}})]}})}})}})},rn=()=>{const e=q("white","$neutral3"),{proxyLink:t}=jt(),{pathname:r}=n(),o=j(N((()=>l.state),(()=>{if(![u.FetchingMore,u.Folder,u.File].includes(l.state))return"";if(l.readme)return l.readme;if([u.FetchingMore,u.Folder].includes(l.state)){const e=l.objs.find((e=>"readme.md"===e.name.toLowerCase()));if(e)return t(e,!0)}return""}))),[i]=J(o,(async e=>{let t={content:e};return/^https?:\/\//g.test(e)&&(t=await $t(e)),setTimeout((()=>{Ut(r())})),t}));return w(x,{get when(){return o()},get children(){return w(Q,{w:"$full",rounded:"$xl",p:"$4",get bgColor(){return e()},shadow:"$lg",get children(){return w(ee,{get loading(){return i.loading},get children(){return w(wt,{get children(){return i()?.content}})}})}})}})},on=e=>{const t=z("home_container");return w(X,{get fallback(){return w(Q,{w:"min(99%, 980px)",get children(){return e.children}})},get children(){return w(Y,{when:"hope_container"===t,get children(){return w(te,{get children(){return e.children}})}})}})},an=()=>w(on,{get children(){return w(G,{class:"body",mt:"$1",py:"$2",px:"2%",minH:"80vh",w:"$full",gap:"$4",get children(){return[w(Gt,{}),w(nn,{}),w(rn,{})]}})}}),ln=ae("<span>|</span>"),sn=()=>{const e=p();return w(G,{class:"footer",w:"$full",py:"$4",get children(){return w(ne,{spacing:"$1",get children(){return[w(re,{href:"https://github.com/Xhofe/alist",external:!0,get children(){return e("home.footer.powered_by")}}),ln.cloneNode(!0),w(Ft,{as:R,get href(){return oe.is_guest(ie())?"/@login":"/@manage"},get children(){return e(oe.is_guest(ie())?"login.login":"home.footer.manage")}})]}})}})},cn={black:"#000",silver:"#C0C0C0",gray:"#808080",white:"#FFF",maroon:"#800000",red:"#F00",purple:"#800080",fuchsia:"#F0F",green:"#008000",lime:"#0F0",olive:"#808000",yellow:"#FF0",navy:"#000080",blue:"#00F",teal:"#008080",aqua:"#0FF",transparent:"#0000"},un="^\\s*",dn="\\s*$",hn="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))\\s*",gn="([0-9A-Fa-f])",pn="([0-9A-Fa-f]{2})",fn=new RegExp(`${un}rgb\\s*\\(${hn},${hn},${hn}\\)${dn}`),mn=new RegExp(`${un}rgba\\s*\\(${hn},${hn},${hn},${hn}\\)${dn}`),yn=new RegExp(`${un}#${gn}${gn}${gn}${dn}`),wn=new RegExp(`${un}#${pn}${pn}${pn}${dn}`),bn=new RegExp(`${un}#${gn}${gn}${gn}${gn}${dn}`),vn=new RegExp(`${un}#${pn}${pn}${pn}${pn}${dn}`);function $n(e){return parseInt(e,16)}function kn(e){try{let t;if(t=wn.exec(e))return[$n(t[1]),$n(t[2]),$n(t[3]),1];if(t=fn.exec(e))return[_n(t[1]),_n(t[5]),_n(t[9]),1];if(t=mn.exec(e))return[_n(t[1]),_n(t[5]),_n(t[9]),Cn(t[13])];if(t=yn.exec(e))return[$n(t[1]+t[1]),$n(t[2]+t[2]),$n(t[3]+t[3]),1];if(t=vn.exec(e))return[$n(t[1]),$n(t[2]),$n(t[3]),Cn($n(t[4])/255)];if(t=bn.exec(e))return[$n(t[1]+t[1]),$n(t[2]+t[2]),$n(t[3]+t[3]),Cn($n(t[4]+t[4])/255)];if(e in cn)return kn(cn[e]);throw new Error(`[seemly/rgba]: Invalid color value ${e}.`)}catch(t){throw t}}function xn(e,t,n,r){return`rgba(${_n(e)}, ${_n(t)}, ${_n(n)}, ${o=r,o>1?1:o<0?0:o})`;var o}function Sn(e,t){const[n,r,o,i=1]=Array.isArray(e)?e:kn(e);return t.alpha?xn(n,r,o,t.alpha):xn(n,r,o,i)}function Cn(e){const t=Math.round(100*Number(e))/100;return t>1?1:t<0?0:t}function _n(e){const t=Math.round(Number(e));return t>255?255:t<0?0:t}const On={list:Tt,grid:pt,image:ft},Mn=()=>{const e=p();return w(fe,{get children(){return[w(le,{as:se,get color(){return ce()},get bgColor(){return Sn(ce(),{alpha:.15})},get _hover(){return{bgColor:Sn(ce(),{alpha:.2})}},"aria-label":"switch layout",compact:!0,size:"lg",get icon(){return w(X,{get children(){return[w(Y,{get when(){return"list"===ue()},get children(){return w(Tt,{})}}),w(Y,{get when(){return"grid"===ue()},get children(){return w(pt,{})}}),w(Y,{get when(){return"image"===ue()},get children(){return w(ft,{})}})]}})}}),w(de,{get children(){return w(A,{get each(){return Object.entries(On)},children:t=>w(he,{get icon(){return w(ge,{get component(){return t[1]}})},onSelect:()=>{pe(t[0])},get children(){return e(`home.layouts.${t[0]}`)}})})}})]}})},En="undefined"!=typeof window?window.navigator.userAgent:"";e("c",/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(En)),/^((?!chrome|android).)*safari/i.test(En),/MicroMessenger/i.test(En),/MSIE|Trident/i.test(En);const jn=e("i",(window?.navigator?.platform??"")?.includes("Mac")),An=()=>{const e=z("logo").split("\n"),t=q(e[0],e.pop());return w($e,{class:"header",w:"$full",get children(){return w(on,{get children(){return w(ne,{px:"calc(2% + 0.5rem)",py:"$2",w:"$full",justifyContent:"space-between",get children(){return[w(ne,{class:"header-left",h:"44px",get children(){return w(me,{get src(){return t()},h:"$full",w:"auto",get fallback(){return w(ye,{})}})}}),w(ne,{class:"header-right",spacing:"$2",get children(){return w(x,{get when(){return l.state===u.Folder},get children(){return[w(x,{get when(){return"none"!==z("search_index")},get children(){return w(ne,{bg:"$neutral4",w:"$32",p:"$2",rounded:"$md",justifyContent:"space-between",border:"2px solid transparent",cursor:"pointer",_hover:{borderColor:"$info6"},onClick:()=>{we.emit("tool","search")},get children(){return[w(be,{as:mt}),w(ne,{get children(){return[j((()=>w(ve,jn?{children:"Cmd"}:{children:"Ctrl"}))),w(ve,{children:"K"})]}})]}})}}),w(Mn,{})]}})}})]}})}})}})};function Fn(e){return ke({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><path d="M9 11l3 3 8-8"/><path d="M20 12v6a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h9"/>'},e)}const Tn=e("o",{rename:{icon:Pt,color:"$accent9"},copy:{icon:function(e){return ke({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><rect width="12" height="12" x="8" y="8" rx="2"/><path d="M16 8V6a2 2 0 00-2-2H6a2 2 0 00-2 2v8a2 2 0 002 2h2"/>'},e)},color:"$success9"},move:{icon:function(e){return ke({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><path d="M14 3v4a1 1 0 001 1h4"/><path d="M17 21H7a2 2 0 01-2-2V5a2 2 0 012-2h7l5 5v11a2 2 0 01-2 2zM9 15h6"/><path d="M12.5 17.5L15 15l-2.5-2.5"/>'},e)},color:"$warning9"},delete:{icon:xe,color:"$danger9"},copy_link:{icon:function(e){return ke({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5 0 005 0l4-4a3.5 3.5 0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5 0 00-5 0l-4 4a3.5 3.5 0 005 5l.5-.5"/>'},e)},color:"$info9"},mkdir:{icon:Dt,p:!0},new_file:{icon:Rt,p:!0},cancel_select:{icon:It},download:{icon:Se,color:"$primary9"}}),Pn=e=>{const t=Ce.findIndex((t=>t===e.name));if(-1!==t&&!oe.can(ie(),t))return null;const n=p();return w(Oe,{placement:"top",withArrow:!0,get label(){return n(`home.toolbar.${e.name}`)},get children(){return w(be,_e({get class(){return`toolbar-${e.name}`},get _hover(){return{bgColor:D()}},_focus:{outline:"none"},cursor:"pointer",boxSize:"$7",rounded:"$md",get p(){return Tn[e.name]?.p?"$1_5":"$1"},_active:{transform:"scale(.94)",transition:"0.2s"},get as(){return Tn[e.name]?.icon},get color(){return Tn[e.name]?.color}},e))}})},Dn=e=>{const t=p();return w(Oe,{get disabled(){return!e.tips},placement:"left",withArrow:!0,get label(){return t(`home.toolbar.${e.tips}`)},get children(){return w(be,_e({get color(){return ce()},get _hover(){return{bgColor:ce(),color:"white"}},_focus:{outline:"none"},cursor:"pointer",boxSize:"$8",rounded:"$lg",p:"$1",_active:{transform:"scale(.94)",transition:"0.2s"},get as(){return e.icon}},e))}})},Rn=()=>{const e=p(),{copySelectedPreviewPage:t,copySelectedRawLink:n}=At(),r="neutral";return w(fe,{placement:"top",offset:10,get children(){return[w(le,{as:Pn,name:"copy_link"}),w(de,{get children(){return[w(he,{colorScheme:r,onSelect:()=>{t()},get children(){return e("home.toolbar.preview_page")}}),w(he,{colorScheme:r,onSelect:()=>{n()},get children(){return e("home.toolbar.down_link")}}),w(he,{colorScheme:r,onSelect:()=>{n(!0)},get children(){return e("home.toolbar.encode_down_link")}})]}})]}})},In=ae("<p></p>"),Vn=()=>{const e=p(),t="neutral",{batchDownloadSelected:n,sendToAria2:r}=Yt();return w(fe,{placement:"top",offset:10,get children(){return[w(le,{as:Pn,name:"download"}),w(de,{get children(){return[w(he,{colorScheme:t,onSelect:n,get children(){return e("home.toolbar.batch_download")}}),w(x,{get when(){return oe.is_admin(ie())||Me("package_download")},get children(){return w(he,{colorScheme:t,onSelect:()=>{we.emit("tool","package_download")},get children(){return e("home.toolbar.package_download")}})}}),w(he,{colorScheme:t,onSelect:r,get children(){return e("home.toolbar.send_aria2")}})]}})]}})},Ln=B((()=>U((()=>t.import("./PackageDownload-legacy-26033539.js")),void 0))),zn=()=>{const e=p(),t=e=>{"package_download"===e&&r()};we.on("tool",t),Ee((()=>{we.off("tool",t)}));const{isOpen:n,onOpen:r,onClose:o}=je(),[i,a]=y("pre_tips");return w(E,{blockScrollOnMount:!1,get opened(){return n()},onClose:o,closeOnOverlayClick:!1,closeOnEsc:!1,get children(){return[w(b,{}),w(v,{get children(){return[w($,{get children(){return e("home.toolbar.package_download")}}),w(W,{get fallback(){return w(K,{})},get children(){return w(x,{get when(){return"pre_tips"===i()},get fallback(){return w(Ln,{onClose:o})},get children(){return[w(k,{get children(){const t=In.cloneNode(!0);return Ae(t,(()=>e("home.toolbar.pre_package_download-tips"))),t}}),w(O,{display:"flex",gap:"$2",get children(){return[w(M,{onClick:o,colorScheme:"neutral",get children(){return e("global.cancel")}}),w(M,{colorScheme:"info",onClick:()=>{a("package_download")},get children(){return e("global.confirm")}})]}})]}})}})]}})]}})};function Bn(e,t){-1===e.indexOf(t)&&e.push(t)}const Un=(e,t,n)=>Math.min(Math.max(n,e),t),qn={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},Hn=e=>"number"==typeof e,Nn=e=>Array.isArray(e)&&!Hn(e[0]),Wn=(e,t,n)=>{const r=t-e;return((n-e)%r+r)%r+e},Kn=(e,t,n)=>-n*e+n*t+e,Xn=()=>{},Yn=e=>e,Zn=(e,t,n)=>t-e==0?1:(n-e)/(t-e);function Gn(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const o=Zn(0,t,r);e.push(Kn(n,1,o))}}function Jn(e,t=function(e){const t=[0];return Gn(t,e-1),t}(e.length),n=Yn){const r=e.length,o=r-t.length;return o>0&&Gn(t,o),o=>{let i=0;for(;i<r-2&&!(o<t[i+1]);i++);let a=Un(0,1,Zn(t[i],t[i+1],o));const l=function(e,t){return Nn(e)?e[Wn(0,e.length,t)]:e}(n,i);return a=l(a),Kn(e[i],e[i+1],a)}}const Qn=e=>Array.isArray(e)&&Hn(e[0]),er=e=>"object"==typeof e&&Boolean(e.createAnimation),tr=e=>"function"==typeof e,nr=e=>"string"==typeof e,rr={ms:e=>1e3*e,s:e=>e/1e3},or=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,ir=1e-7,ar=12;function lr(e,t,n,r){if(e===t&&n===r)return Yn;const o=t=>function(e,t,n,r,o){let i,a,l=0;do{a=t+(n-t)/2,i=or(a,r,o)-e,i>0?n=a:t=a}while(Math.abs(i)>ir&&++l<ar);return a}(t,0,1,e,n);return e=>0===e||1===e?e:or(o(e),t,r)}const sr=(e,t="end")=>n=>{const r=(n="end"===t?Math.min(n,.999):Math.max(n,.001))*e,o="end"===t?Math.floor(r):Math.ceil(r);return Un(0,1,o/e)},cr={ease:lr(.25,.1,.25,1),"ease-in":lr(.42,0,1,1),"ease-in-out":lr(.42,0,.58,1),"ease-out":lr(0,0,.58,1)},ur=/\((.*?)\)/;function dr(e){if(tr(e))return e;if(Qn(e))return lr(...e);if(cr[e])return cr[e];if(e.startsWith("steps")){const t=ur.exec(e);if(t){const e=t[1].split(",");return sr(parseFloat(e[0]),e[1].trim())}}return Yn}class hr{constructor(e,t=[0,1],{easing:n,duration:r=qn.duration,delay:o=qn.delay,endDelay:i=qn.endDelay,repeat:a=qn.repeat,offset:l,direction:s="normal"}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=Yn,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise(((e,t)=>{this.resolve=e,this.reject=t})),n=n||qn.easing,er(n)){const e=n.createAnimation(t);n=e.easing,t=e.keyframes||t,r=e.duration||r}this.repeat=a,this.easing=Nn(n)?Yn:dr(n),this.updateDuration(r);const c=Jn(t,l,Nn(n)?n.map(dr):Yn);this.tick=t=>{var n;let r=0;r=void 0!==this.pauseTime?this.pauseTime:(t-this.startTime)*this.rate,this.t=r,r/=1e3,r=Math.max(r-o,0),"finished"===this.playState&&void 0===this.pauseTime&&(r=this.totalDuration);const a=r/this.duration;let l=Math.floor(a),u=a%1;!u&&a>=1&&(u=1),1===u&&l--;const d=l%2;("reverse"===s||"alternate"===s&&d||"alternate-reverse"===s&&!d)&&(u=1-u);const h=r>=this.totalDuration?1:Math.min(u,1),g=c(this.easing(h));e(g),void 0===this.pauseTime&&("finished"===this.playState||r>=this.totalDuration+i)?(this.playState="finished",null===(n=this.resolve)||void 0===n||n.call(this,g)):"idle"!==this.playState&&(this.frameRequestId=requestAnimationFrame(this.tick))},this.play()}play(){const e=performance.now();this.playState="running",void 0!==this.pauseTime?this.startTime=e-this.pauseTime:this.startTime||(this.startTime=e),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var e;this.playState="idle",void 0!==this.frameRequestId&&cancelAnimationFrame(this.frameRequestId),null===(e=this.reject)||void 0===e||e.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(e){this.duration=e,this.totalDuration=e*(this.repeat+1)}get currentTime(){return this.t}set currentTime(e){void 0!==this.pauseTime||0===this.rate?this.pauseTime=e:this.startTime=performance.now()-e/this.rate}get playbackRate(){return this.rate}set playbackRate(e){this.rate=e}}class gr{setAnimation(e){this.animation=e,null==e||e.finished.then((()=>this.clearAnimation())).catch((()=>{}))}clearAnimation(){this.animation=this.generator=void 0}}const pr=new WeakMap;function fr(e){return pr.has(e)||pr.set(e,{transforms:[],values:new Map}),pr.get(e)}const mr=["","X","Y","Z"],yr={x:"translateX",y:"translateY",z:"translateZ"},wr={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:e=>e+"deg"},br={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:e=>e+"px"},rotate:wr,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:Yn},skew:wr},vr=new Map,$r=e=>`--motion-${e}`,kr=["x","y","z"];["translate","scale","rotate","skew"].forEach((e=>{mr.forEach((t=>{kr.push(e+t),vr.set($r(e+t),br[e])}))}));const xr=(e,t)=>kr.indexOf(e)-kr.indexOf(t),Sr=new Set(kr),Cr=e=>Sr.has(e),_r=(e,t)=>{yr[t]&&(t=yr[t]);const{transforms:n}=fr(e);Bn(n,t),e.style.transform=Or(n)},Or=e=>e.sort(xr).reduce(Mr,"").trim(),Mr=(e,t)=>`${e} ${t}(var(${$r(t)}))`,Er=e=>e.startsWith("--"),jr=new Set,Ar=(e,t)=>document.createElement("div").animate(e,t),Fr={cssRegisterProperty:()=>"undefined"!=typeof CSS&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{Ar({opacity:[1]})}catch(e){return!1}return!0},finished:()=>Boolean(Ar({opacity:[0,1]},{duration:.001}).finished),linearEasing:()=>{try{Ar({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0}},Tr={},Pr={};for(const e in Fr)Pr[e]=()=>(void 0===Tr[e]&&(Tr[e]=Fr[e]()),Tr[e]);const Dr=(e,t)=>tr(e)?Pr.linearEasing()?`linear(${((e,t)=>{let n="";const r=Math.round(t/.015);for(let o=0;o<r;o++)n+=e(Zn(0,r-1,o))+", ";return n.substring(0,n.length-2)})(e,t)})`:qn.easing:Qn(e)?Rr(e):e,Rr=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Ir=e=>Array.isArray(e)?e:[e];function Vr(e){return yr[e]&&(e=yr[e]),Cr(e)?$r(e):e}const Lr={get:(e,t)=>{t=Vr(t);let n=Er(t)?e.style.getPropertyValue(t):getComputedStyle(e)[t];if(!n&&0!==n){const e=vr.get(t);e&&(n=e.initialValue)}return n},set:(e,t,n)=>{t=Vr(t),Er(t)?e.style.setProperty(t,n):e.style[t]=n}};function zr(e,t,n,r={},o){const i=window.__MOTION_DEV_TOOLS_RECORD,a=!1!==r.record&&i;let l,{duration:s=qn.duration,delay:c=qn.delay,endDelay:u=qn.endDelay,repeat:d=qn.repeat,easing:h=qn.easing,persist:g=!1,direction:p,offset:f,allowWebkitAcceleration:m=!1}=r;const y=fr(e),w=Cr(t);let b=Pr.waapi();w&&_r(e,t);const v=Vr(t),$=function(e,t){return e.has(t)||e.set(t,new gr),e.get(t)}(y.values,v),k=vr.get(v);return function(e,t=!0){if(e&&"finished"!==e.playState)try{e.stop?e.stop():(t&&e.commitStyles(),e.cancel())}catch(n){}}($.animation,!(er(h)&&$.generator)&&!1!==r.record),()=>{const y=()=>{var t,n;return null!==(n=null!==(t=Lr.get(e,v))&&void 0!==t?t:null==k?void 0:k.initialValue)&&void 0!==n?n:0};let x=function(e,t){for(let n=0;n<e.length;n++)null===e[n]&&(e[n]=n?e[n-1]:t());return e}(Ir(n),y);const S=function(e,t){var n;let r=(null==t?void 0:t.toDefaultUnit)||Yn;const o=e[e.length-1];if(nr(o)){const e=(null===(n=o.match(/(-?[\d.]+)([a-z%]*)/))||void 0===n?void 0:n[2])||"";e&&(r=t=>t+e)}return r}(x,k);if(er(h)){const e=h.createAnimation(x,"opacity"!==t,y,v,$);h=e.easing,x=e.keyframes||x,s=e.duration||s}if(Er(v)&&(Pr.cssRegisterProperty()?function(e){if(!jr.has(e)){jr.add(e);try{const{syntax:t,initialValue:n}=vr.has(e)?vr.get(e):{};CSS.registerProperty({name:e,inherits:!1,syntax:t,initialValue:n})}catch(t){}}}(v):b=!1),w&&!Pr.linearEasing()&&(tr(h)||Nn(h)&&h.some(tr))&&(b=!1),b){k&&(x=x.map((e=>Hn(e)?k.toDefaultUnit(e):e))),1!==x.length||Pr.partialKeyframes()&&!a||x.unshift(y());const t={delay:rr.ms(c),duration:rr.ms(s),endDelay:rr.ms(u),easing:Nn(h)?void 0:Dr(h,s),direction:p,iterations:d+1,fill:"both"};l=e.animate({[v]:x,offset:f,easing:Nn(h)?h.map((e=>Dr(e,s))):void 0},t),l.finished||(l.finished=new Promise(((e,t)=>{l.onfinish=e,l.oncancel=t})));const n=x[x.length-1];l.finished.then((()=>{g||(Lr.set(e,v,n),l.cancel())})).catch(Xn),m||(l.playbackRate=1.000001)}else if(o&&w)x=x.map((e=>"string"==typeof e?parseFloat(e):e)),1===x.length&&x.unshift(parseFloat(y())),l=new o((t=>{Lr.set(e,v,S?S(t):t)}),x,Object.assign(Object.assign({},r),{duration:s,easing:h}));else{const t=x[x.length-1];Lr.set(e,v,k&&Hn(t)?k.toDefaultUnit(t):t)}return a&&i(e,t,x,{duration:s,delay:c,easing:h,repeat:d,offset:f},"motion-one"),$.setAnimation(l),l}}const Br=(e,t)=>e[t]?Object.assign(Object.assign({},e),e[t]):Object.assign({},e);function Ur(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}const qr={any:0,all:1};function Hr(e,t,{root:n,margin:r,amount:o="any"}={}){if("undefined"==typeof IntersectionObserver)return()=>{};const i=function(e,t){var n;return"string"==typeof e?t?(null!==(n=t[e])&&void 0!==n||(t[e]=document.querySelectorAll(e)),e=t[e]):e=document.querySelectorAll(e):e instanceof Element&&(e=[e]),Array.from(e||[])}(e),a=new WeakMap,l=new IntersectionObserver((e=>{e.forEach((e=>{const n=a.get(e.target);if(e.isIntersecting!==Boolean(n))if(e.isIntersecting){const n=t(e);tr(n)?a.set(e.target,n):l.unobserve(e.target)}else n&&(n(e),a.delete(e.target))}))}),{root:n,rootMargin:r,threshold:"number"==typeof o?o:qr[o]});return i.forEach((e=>l.observe(e))),()=>l.disconnect()}function Nr(e,t){return function(e){return"object"==typeof e}(e)?e:e&&t?t[e]:void 0}let Wr;function Kr(){if(!Wr)return;const e=Wr.sort(Yr).map(Zr);e.forEach(Gr),e.forEach(Gr),Wr=void 0}function Xr(e){Wr?Bn(Wr,e):(Wr=[e],requestAnimationFrame(Kr))}const Yr=(e,t)=>e.getDepth()-t.getDepth(),Zr=e=>e.animateUpdates(),Gr=e=>e.next(),Jr=(e,t)=>new CustomEvent(e,{detail:{target:t}});function Qr(e,t,n){e.dispatchEvent(new CustomEvent(t,{detail:{originalEvent:n}}))}function eo(e,t,n){e.dispatchEvent(new CustomEvent(t,{detail:{originalEntry:n}}))}const to=(e,t,n)=>r=>{r.pointerType&&"mouse"!==r.pointerType||(n(),Qr(e,t,r))},no={inView:{isActive:e=>Boolean(e.inView),subscribe:(e,{enable:t,disable:n},{inViewOptions:r={}})=>{const{once:o}=r,i=Ur(r,["once"]);return Hr(e,(r=>{if(t(),eo(e,"viewenter",r),!o)return t=>{n(),eo(e,"viewleave",t)}}),i)}},hover:{isActive:e=>Boolean(e.hover),subscribe:(e,{enable:t,disable:n})=>{const r=to(e,"hoverstart",t),o=to(e,"hoverend",n);return e.addEventListener("pointerenter",r),e.addEventListener("pointerleave",o),()=>{e.removeEventListener("pointerenter",r),e.removeEventListener("pointerleave",o)}}},press:{isActive:e=>Boolean(e.press),subscribe:(e,{enable:t,disable:n})=>{const r=t=>{n(),Qr(e,"pressend",t),window.removeEventListener("pointerup",r)},o=n=>{t(),Qr(e,"pressstart",n),window.addEventListener("pointerup",r)};return e.addEventListener("pointerdown",o),()=>{e.removeEventListener("pointerdown",o),window.removeEventListener("pointerup",r)}}}},ro=["initial","animate",...Object.keys(no),"exit"],oo=new WeakMap;function io(e={},t){let n,r=t?t.getDepth()+1:0;const o={initial:!0,animate:!0},i={},a={};for(const g of ro)a[g]="string"==typeof e[g]?e[g]:null==t?void 0:t.getContext()[g];const l=!1===e.initial?"animate":"initial";let s=Ur(Nr(e[l]||a[l],e.variants)||{},["transition"]);const c=Object.assign({},s),u=(e,t)=>()=>{o[e]=t,Xr(h)},d=()=>{for(const t in no){const r=no[t].isActive(e),o=i[t];r&&!o?i[t]=no[t].subscribe(n,{enable:u(t,!0),disable:u(t,!1)},e):!r&&o&&(o(),delete i[t])}},h={update:t=>{n&&(e=t,d(),Xr(h))},setActive:(e,t)=>{n&&(o[e]=t,Xr(h))},animateUpdates:function*(){var t,r;const i=s;s={};const a={};for(const n of ro){if(!o[n])continue;const i=Nr(e[n]);if(i)for(const n in i)"transition"!==n&&(s[n]=i[n],a[n]=Br(null!==(r=null!==(t=i.transition)&&void 0!==t?t:e.transition)&&void 0!==r?r:{},n))}const l=new Set([...Object.keys(s),...Object.keys(i)]),u=[];l.forEach((e=>{var t,r,o;void 0===s[e]&&(s[e]=c[e]),r=i[e],o=s[e],typeof r==typeof o&&(Array.isArray(r)&&Array.isArray(o)?function(e,t){const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}(r,o):r===o)||(null!==(t=c[e])&&void 0!==t||(c[e]=Lr.get(n,e)),u.push(zr(n,e,s[e],a[e],hr)))})),yield;const d=u.map((e=>e())).filter(Boolean);if(!d.length)return;const h=s;n.dispatchEvent(Jr("motionstart",h)),Promise.all(d.map((e=>e.finished))).then((()=>{n.dispatchEvent(Jr("motioncomplete",h))})).catch(Xn)},getDepth:()=>r,getTarget:()=>s,getOptions:()=>e,getContext:()=>a,mount:e=>(n=e,oo.set(n,h),d(),()=>{oo.delete(n),function(e){Wr&&function(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}(Wr,e)}(h);for(const e in i)i[e]()}),isMounted:()=>Boolean(n)};return h}const ao={initial:()=>!0,addCleanup:Ee,addMount:Te},lo=Fe(),so=Fe(ao);var co=/([^:; ]*):\s*([^;]*)/g;function uo(e){const t={};let n;for(;n=co.exec(e);)t[n[1]]=n[2];return t}const ho=e=>{const[t,,n]=Re(e,["initial","animate","inView","inViewOptions","hover","press","variants","transition","exit"],["tag","ref","style","onMotionStart","onMotionComplete","onHoverStart","onHoverEnd","onPressStart","onPressEnd","onViewEnter","onViewLeave"]),r=function(e,t,n,r){const{addCleanup:o,addMount:i,initial:a}=n,l=io(a()?t():{...t(),initial:!1},r);return i(Pe.bind(void 0,De(),(()=>{o(l.mount(e())),H((()=>l.update(t())))}))),l}((()=>i),(()=>({...t})),Ie(so),Ie(lo)),o=function(e){const t={},n=[];for(let r in e){const o=e[r];Cr(r)&&(yr[r]&&(r=yr[r]),n.push(r),r=$r(r));let i=Array.isArray(o)?o[0]:o;const a=vr.get(r);a&&(i=Hn(o)?a.toDefaultUnit(o):o),t[r]=i}return n.length&&(t.transform=Or(n)),t}(r.getTarget());let i;return w(lo.Provider,{value:r,get children(){return w(ge,_e({ref:t=>{i=t,e.ref?.(t)},get component(){return Ve((()=>e.tag||"div"))},get style(){return j((()=>!!e.style))()?(t=e.style,n=o,"object"==typeof t&&"object"==typeof n?{...t,...n}:"string"==typeof t&&"string"==typeof n?`${t};${n}`:{..."object"==typeof t?t:uo(t),..."object"==typeof n?n:uo(n)}):o;var t,n},get"on:motionstart"(){return e.onMotionStart},get"on:motioncomplete"(){return e.onMotionComplete},get"on:hoverstart"(){return e.onHoverStart},get"on:hoverend"(){return e.onHoverEnd},get"on:pressstart"(){return e.onPressStart},get"on:pressend"(){return e.onPressEnd},get"on:viewenter"(){return e.onViewEnter},get"on:viewleave"(){return e.onViewLeave}},n))}})},go=e("M",new Proxy(ho,{get:(e,t)=>e=>(delete e.tag,w(ho,_e(e,{tag:t})))})),po=(e,t)=>{const n={once:!0};e.addEventListener("motioncomplete",t,n),Ee(e.removeEventListener.bind(e,"motioncomplete",t,n))},fo=e=>{let{initial:t=!0}=e;Te((()=>t=!0));let n=!1,r=[],o=[],i=[];return Ee((()=>{i.concat(o).forEach((e=>e())),o=i=r=[]})),w(so.Provider,{value:{addCleanup:e=>o.push(e),addMount:e=>r.push(e),initial:()=>t},get children(){return w(lo.Provider,{value:void 0,get children(){return Ve((()=>{const t=Le((()=>e.children)),a=j((()=>(e=>(e=Array.isArray(e)?e[0]:e)instanceof Element?e:void 0)(t()))),[l,s]=y(),[c,u]=y();return ze(N(a,(t=>{i.push(...o),o=[],Be((()=>{e.exitBeforeEnter?h((()=>!n&&d(t))):(h(),d(t))}))}))),[l,c];function d(e){s(e),r.forEach((e=>e())),r=[]}function h(e){const t=()=>{u(),i.forEach((e=>e())),i=[],e?.()},r=u(l()??c());if(!r)return t();const o=oo.get(r);if(!o||!o.getOptions().exit)return t();o.setActive("exit",n=!0),po(r,(()=>{n=!1,t()}))}}))}})}})},mo=()=>{const e=j((()=>[u.Folder,u.FetchingMore].includes(l.state)&&Ue()&&qe()));return w(fo,{exitBeforeEnter:!0,get children(){return w(x,{get when(){return e()},get children(){return w(Q,{class:"center-toolbar",pos:"fixed",bottom:"$4",right:"50%",w:"max-content",color:"$neutral11",get as(){return go.div},initial:{opacity:0,scale:.9,x:"50% ",y:10},animate:{opacity:1,scale:1,x:"50%",y:0},exit:{opacity:0,scale:.9},transition:{duration:.2},get children(){return w(ne,{p:"$2",get bgColor(){return q("white","#000000d0")()},spacing:"$1",shadow:"0px 10px 30px -5px rgba(0, 0, 0, 0.3)",rounded:"$lg",css:{backdropFilter:"blur(8px)"},get children(){return[w(A,{each:["rename","move","copy","delete"],children:e=>w(Pn,{name:e,onClick:()=>{we.emit("tool",e)}})}),w(Rn,{}),w(Vn,{}),w(Pn,{name:"cancel_select",onClick:()=>{He(!1)}})]}})}})}})}})},yo=()=>{const{isOpen:e,onToggle:t}=je({defaultIsOpen:"true"===localStorage.getItem("more-open"),onClose:()=>localStorage.setItem("more-open","false"),onOpen:()=>localStorage.setItem("more-open","true")}),n=j((()=>e()?"$4":"$5")),r=j((()=>l.state===u.Folder)),{refresh:o}=Xt();return w(Q,{class:"left-toolbar-box",pos:"fixed",get right(){return n()},get bottom(){return n()},get children(){return w(x,{get when(){return e()},get fallback(){return w(Dn,{class:"toolbar-toggle",as:Vt,onClick:()=>{t()}})},get children(){return w(G,{class:"left-toolbar",p:"$1",rounded:"$lg",spacing:"$1",bgColor:"$neutral1",get as(){return go.div},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.6},transition:{duration:.2},get children(){return[w(G,{spacing:"$1",class:"left-toolbar-in",get children(){return[w(x,{get when(){return j((()=>!!r()))()&&(Ne("write")||l.write)},get children(){return[w(Dn,{as:Lt,tips:"refresh",onClick:()=>{o(void 0,!0)}}),w(Dn,{get as(){return Tn.new_file.icon},tips:"new_file",onClick:()=>{we.emit("tool","new_file")}}),w(Dn,{get as(){return Tn.mkdir.icon},p:"$1_5",tips:"mkdir",onClick:()=>{we.emit("tool","mkdir")}}),w(Dn,{as:We,tips:"upload",onClick:()=>{we.emit("tool","upload")}})]}}),w(x,{get when(){return j((()=>!!r()))()&&Ne("offline_download")},get children(){return w(Dn,{as:Ke,pl:"0",tips:"offline_download",onClick:()=>{we.emit("tool","offline_download")}})}}),w(Dn,{tips:"toggle_checkbox",as:Fn,onClick:Xe}),w(Dn,{as:Ye,tips:"local_settings",onClick:()=>{we.emit("tool","local_settings")}})]}}),w(Dn,{tips:"more",as:Vt,onClick:t})]}})}})}})},wo=()=>{const{isOpen:e,onOpen:t,onClose:o}=je(),[i,a]=r(kt),{pathname:l}=n(),{refresh:s}=Xt(),c=e=>{"copy"===e&&t()};return we.on("tool",c),Ee((()=>{we.off("tool",c)})),w(zt,{get opened(){return e()},onClose:o,get loading(){return i()},onSubmit:async e=>{const t=await a(l(),e,f().map((e=>e.name)));Ze(t,(()=>{s(),o()}))}})},bo=()=>{const{isOpen:e,onOpen:t,onClose:o}=je(),[i,a]=r(xt),{pathname:l}=n(),{refresh:s}=Xt(),c=e=>{"move"===e&&t()};return we.on("tool",c),Ee((()=>{we.off("tool",c)})),w(zt,{get opened(){return e()},onClose:o,get loading(){return i()},onSubmit:async e=>{const t=await a(l(),e,f().map((e=>e.name)));Ze(t,(()=>{s(),o()}))}})},vo=ae("<p></p>"),$o=()=>{const e=p(),{isOpen:t,onOpen:o,onClose:i}=je(),[a,l]=r(St),{refresh:s}=Xt(),{pathname:c}=n(),u=e=>{"delete"===e&&o()};return we.on("tool",u),Ee((()=>{we.off("tool",u)})),w(E,{blockScrollOnMount:!1,get opened(){return t()},onClose:i,size:{"@initial":"xs","@md":"md"},get children(){return[w(b,{}),w(v,{get children(){return[w($,{get children(){return e("home.toolbar.delete")}}),w(k,{get children(){const t=vo.cloneNode(!0);return Ae(t,(()=>e("home.toolbar.delete-tips"))),t}}),w(O,{display:"flex",gap:"$2",get children(){return[w(M,{onClick:i,colorScheme:"neutral",get children(){return e("global.cancel")}}),w(M,{colorScheme:"danger",get loading(){return a()},onClick:async()=>{const e=await l(c(),f().map((e=>e.name)));Ze(e,(()=>{s(),i()}))},get children(){return e("global.confirm")}})]}})]}})]}})},ko=()=>{const{isOpen:e,onOpen:t,onClose:o}=je(),i=p(),[a,l]=r(Ct),{pathname:c}=n(),{refresh:u}=Xt(),d=e=>{if("rename"===e){if(!Ge())return void g.warning(i("home.toolbar.only_one-tips"));t()}};return we.on("tool",d),Ee((()=>{we.off("tool",d)})),w(x,{get when(){return e()},get children(){return w(Zt,{title:"home.toolbar.input_new_name",get opened(){return e()},onClose:o,get defaultValue(){return f()[0]?.name??""},get loading(){return a()},onSubmit:async e=>{const t=await l(s(c(),f()[0].name),e);Ze(t,(()=>{u(),o()}))}})}})},xo=()=>{const{isOpen:e,onOpen:t,onClose:i}=je(),[a,l]=r(_t),{refresh:c}=Xt(),{pathname:u}=n(),d=e=>{"new_file"===e&&t()};return we.on("tool",d),Ee((()=>{we.off("tool",d)})),w(Zt,{title:"home.toolbar.input_filename",get opened(){return e()},onClose:i,get loading(){return a()},onSubmit:async e=>{const t=await l(s(u(),e),o());Ze(t,(()=>{c(),i()}))}})},So=()=>{const{isOpen:e,onOpen:t,onClose:o}=je(),[i,a]=r(Ot),{pathname:l}=n(),{refresh:c}=Xt(),u=e=>{"mkdir"===e&&t()};return we.on("tool",u),Ee((()=>{we.off("tool",u)})),w(Zt,{title:"home.toolbar.input_dir_name",get opened(){return e()},onClose:o,get loading(){return i()},onSubmit:async e=>{const t=await a(s(l(),e));Ze(t,(()=>{c(),o()}))}})},Co=()=>{const e=p(),[t,o]=y("aria2"),{isOpen:i,onOpen:a,onClose:l}=je(),[s,c]=r(Mt),{pathname:u}=n(),d=e=>{"offline_download"===e&&a()};return we.on("tool",d),Ee((()=>{we.off("tool",d)})),w(Zt,{title:"home.toolbar.offline_download",type:"text",get opened(){return i()},onClose:l,get loading(){return s()},get tips(){return e("home.toolbar.offline_download-tips")},get topSlot(){return w(Q,{mb:"$2",get children(){return w(Je,{get value(){return t()},onChange:e=>o(e),options:[{value:"aria2",label:"Aria2"},{value:"qbit",label:"qBittorrent"}]})}})},onSubmit:async e=>{const n=await c(u(),e.split("\n"),t());Ze(n,(()=>{l()}))}})},_o=e=>{const t=p(),n=t=>{t===e.name&&o()};we.on("tool",n),Ee((()=>{we.off("tool",n)}));const{isOpen:r,onOpen:o,onClose:i}=je();return w(E,{get blockScrollOnMount(){return e.blockScrollOnMount},get opened(){return r()},onClose:i,closeOnOverlayClick:!1,closeOnEsc:!1,size:{"@initial":"xs","@md":"md","@lg":"lg","@xl":"xl","@2xl":"2xl"},get children(){return[w(b,{}),w(v,{get children(){return[w(Qe,{}),w($,{get children(){return t(e.title)}}),w(k,{get children(){return w(x,{get when(){return r()},get children(){return w(W,{get fallback(){return w(K,{})},get children(){return e.children}})}})}})]}})]}})},Oo=e=>{const t=p();return w(dt,{get children(){return[w(ct,{get children(){return t(`home.local_settings.${e.name}`)}}),w(S,{get value(){return m[e.name]},onInput:t=>{ut(e.name,t.currentTarget.value)}})]}})},Mo=()=>{const{isOpen:e,onOpen:t,onClose:n}=je(),r=p(),o=e=>{"local_settings"===e&&t()};return we.on("tool",o),Ee((()=>{we.off("tool",o)})),w(st,{get opened(){return e()},placement:"right",onClose:n,get children(){return[w(et,{}),w(tt,{get children(){return[w(nt,{}),w(rt,{color:"$info9",get children(){return r("home.toolbar.local_settings")}}),w(ot,{get children(){return[w(G,{spacing:"$2",get children(){return w(A,{get each(){return Object.keys(it)},children:e=>w(Oo,{name:e})})}}),w($e,{mt:"$4",get children(){return w(ne,{spacing:"$4",p:"$2",color:"$neutral11",get children(){return[w(at,{}),w(lt,{})]}})}})]}})]}})]}})},Eo=B((()=>U((()=>t.import("./Upload-legacy-56cb370f.js")),void 0))),jo=()=>[w(wo,{}),w(bo,{}),w(ko,{}),w($o,{}),w(xo,{}),w(So,{}),w(Co,{}),w(zn,{}),w(_o,{name:"upload",title:"home.toolbar.upload",get children(){return w(Eo,{})}}),w(Mo,{})],Ao=()=>w(ht,{get children(){return[w(yo,{}),w(mo,{}),w(jo,{})]}}),Fo=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{yt(z("site_title"));const e=z("announcement");return e&&g.render((()=>w(wt,{children:e}))),[w(An,{}),w(Ao,{}),w(an,{}),w(sn,{})]}},Symbol.toStringTag,{value:"Module"}));e("L",Fo)}}}));
