System.register(["./index-legacy-525baae1.js","./api-legacy-f796fb21.js","./index-legacy-4aac5e6e.js","./Common-legacy-7b20291c.js","./index-legacy-1cd78d63.js","./index-legacy-899e752b.js","./SettingItem-legacy-39727efe.js","./item_type-legacy-401bb746.js","./ResponsiveGrid-legacy-e2766b3e.js"],(function(e,t){"use strict";var r,n,a,i,s,o,l,d,c,u,g,h,f,m,p,b,k,x,y,v,C,w,$,_,j,N,S,I,z,M,B,T,D,G,L;return{setters:[e=>{r=e.bD,n=e.a4,a=e.d,i=e.e,s=e.a,o=e.b6,l=e.ar,d=e.as,c=e.f,u=e.bf,g=e.m,h=e.a0,f=e.J,m=e.ah,p=e.W,b=e.bc,k=e.t,x=e.bx,y=e.bH,v=e.B,C=e.r,w=e.M,$=e.i,_=e.aQ,j=e.j,N=e.k,S=e.T,I=e.I,z=e.q,M=e.bd,B=e.aN},e=>{T=e.l,D=e.u},e=>{G=e.G},e=>{L=e.default},()=>{},()=>{},()=>{},()=>{},()=>{}],execute:function(){const t=n('<svg width="1em" height="1em" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" stroke-opacity=".3" d="M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="1.3s" values="60;0"></animate></path><path stroke-dasharray="15" stroke-dashoffset="15" d="M12 3C16.9706 3 21 7.02944 21 12"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.3s" values="15;0"></animate><animateTransform attributeName="transform" dur="1.5s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12"></animateTransform></path></g></svg>'),O=n('<svg width="1em" height="1em" viewBox="0 0 24 24"><g stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path fill="currentColor" fill-opacity="0" stroke-dasharray="60" stroke-dashoffset="60" d="M3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.5s" values="60;0"></animate><animate fill="freeze" attributeName="fill-opacity" begin="0.8s" dur="0.15s" values="0;0.3"></animate></path><path fill="none" stroke-dasharray="14" stroke-dashoffset="14" d="M8 12L11 15L16 10"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.6s" dur="0.2s" values="14;0"></animate></path></g></svg>');function Z(e){return(()=>{const n=t.cloneNode(!0);return r(n,e,!0,!0),n})()}function q(e){return(()=>{const t=O.cloneNode(!0);return r(t,e,!0,!0),t})()}e("default",(()=>{const e=a(),[t,r]=i(),[n,O]=s((()=>o.get("/admin/index/progress"))),E=async()=>{const e=await O();M(e,(e=>{r(e)}))},H=setInterval(E,5e3);l((()=>clearInterval(H))),E();const[J,Q]=s(T),R=async()=>{const e=await Q();B(e),E()},[W,X]=s((()=>o.post("/admin/index/clear"))),A=async()=>{const e=await X();B(e),E()},[F,K]=s((()=>o.post("/admin/index/stop"))),P=async()=>{const e=await K();B(e),E()};let U,V;const[Y,ee]=s(D),te=async()=>{let e=[];U.value&&(e=U.value.split("\n"));let t=20;V.value&&(t=parseInt(V.value));const r=await ee(e,t);B(r),E()},{isOpen:re,onOpen:ne,onClose:ae}=d();return c(p,{spacing:"$2",w:"$full",alignItems:"start",get children(){return[c(u,{get children(){return e("manage.sidemenu.settings")}}),c(L,{get group(){return G.INDEX}}),c(u,{get children(){return e("indexes.current")}}),c(g,{get when(){return t()},get children(){return c(h,{spacing:"$2",w:"fit-content",shadow:"$md",rounded:"$lg",get bg(){return f("","$neutral3")()},get children(){return[c(m,{boxSize:"$28",color:"$accent9",p:"$2",get as(){return t()?.is_done?q:Z}}),c(p,{spacing:"$2",flex:"1",alignItems:"start",mr:"$2",get children(){return[c(b,{get children(){return[k((()=>e("indexes.obj_count"))),":",c(x,{colorScheme:"info",ml:"$2",get children(){return t()?.obj_count}})]}}),c(b,{get children(){return[k((()=>e("indexes.last_done_time"))),":",c(x,{colorScheme:"accent",ml:"$2",get children(){return k((()=>!!t().last_done_time))()?y(t().last_done_time):e("indexes.unknown")}})]}}),c(g,{get when(){return t()?.error},get children(){return c(b,{css:{wordBreak:"break-all"},get children(){return[k((()=>e("indexes.error"))),":",c(x,{colorScheme:"danger",ml:"$2",get children(){return t().error}})]}})}})]}})]}})}}),c(h,{spacing:"$2",get children(){return[c(v,{colorScheme:"accent",onClick:[E,void 0],get loading(){return n()},get children(){return e("global.refresh")}}),c(v,{colorScheme:"danger",onClick:[A,void 0],get loading(){return W()},get children(){return e("indexes.clear")}}),c(v,{colorScheme:"warning",onClick:[P,void 0],get loading(){return F()},get children(){return e("indexes.stop")}}),c(v,{onClick:[R,void 0],get loading(){return J()},get children(){return e("indexes."+(t()?.is_done?"rebuild":"build"))}})]}}),c(v,{onClick:ne,get children(){return e("indexes.update")}}),c(C,{get opened(){return re()},onClose:ae,get children(){return[c(w,{}),c($,{get children(){return[c(_,{}),c(j,{get children(){return e("indexes.update")}}),c(N,{get children(){return[c(u,{get children(){return e("indexes.paths_to_update")}}),c(S,{ref(e){"function"==typeof U?U(e):U=e}}),c(u,{get children(){return e("indexes.max_depth")}}),c(I,{value:20,type:"number",ref(e){"function"==typeof V?V(e):V=e}})]}}),c(z,{get children(){return c(v,{onClick:[te,void 0],get loading(){return Y()},get children(){return e("indexes.update")}})}})]}})]}})]}})}))}}}));
