System.register(["./index-legacy-525baae1.js","./index-legacy-1cd78d63.js","./DeletePopover-legacy-c7cedfcf.js","./Wether-legacy-28f291ad.js"],(function(e,r){"use strict";var n,t,c,l,a,s,i,u,d,g,o,h,m,b,$,f,p,y,v,w,x,j,k,C,S,_,W;return{setters:[e=>{n=e.d,t=e.u,c=e.a,l=e.b6,a=e.e,s=e.c7,i=e.f,u=e.a0,d=e.B,g=e.Y,o=e.c8,h=e.c9,m=e.ca,b=e.v,$=e.cb,f=e.cc,p=e.cd,y=e.bd,v=e.n,w=e.W,x=e.bx,j=e.an,k=e.ap,C=e.a2},e=>{S=e.o},e=>{_=e.D},e=>{W=e.W}],execute:function(){const r=e=>{const r=[{name:"general",color:"info"},{name:"guest",color:"neutral"},{name:"admin",color:"accent"}];return i(x,{get colorScheme(){return r[e.role].color},get children(){return r[e.role].name}})},D=e=>{const r=n();return i(u,{spacing:"$0_5",get children(){return i(b,{each:j,children:(n,t)=>i(k,{get label(){return r(`users.permissions.${n}`)},get children(){return i(g,{boxSize:"$2",rounded:"$full",get bg(){return`$${C.can(e.user,t())?"success":"danger"}9`}})}})})}})};e("default",(()=>{const e=n();S("manage.sidemenu.users");const{to:x}=t(),[j,k]=c((()=>l.get("/admin/user/list"))),[C,z]=a([]),B=async()=>{const e=await k();y(e,(e=>z(e.content)))};B();const[H,I]=s((e=>l.post(`/admin/user/delete?id=${e}`)));return i(w,{spacing:"$2",alignItems:"start",w:"$full",get children(){return[i(u,{spacing:"$2",get children(){return[i(d,{colorScheme:"accent",get loading(){return j()},onClick:B,get children(){return e("global.refresh")}}),i(d,{onClick:()=>{x("/@manage/users/add")},get children(){return e("global.add")}})]}}),i(g,{w:"$full",overflowX:"auto",get children(){return i(o,{highlightOnHover:!0,dense:!0,get children(){return[i(h,{get children(){return i(m,{get children(){return[i(b,{each:["username","base_path","role","permission","available"],children:r=>i($,{get children(){return e(`users.${r}`)}})}),i($,{get children(){return e("global.operations")}})]}})}}),i(f,{get children(){return i(b,{get each(){return C()},children:n=>i(m,{get children(){return[i(p,{get children(){return n.username}}),i(p,{get children(){return n.base_path}}),i(p,{get children(){return i(r,{get role(){return n.role}})}}),i(p,{get children(){return i(D,{user:n})}}),i(p,{get children(){return i(W,{get yes(){return!n.disabled}})}}),i(p,{get children(){return i(u,{spacing:"$2",get children(){return[i(d,{onClick:()=>{x(`/@manage/users/edit/${n.id}`)},get children(){return e("global.edit")}}),i(_,{get name(){return n.username},get loading(){return H()===n.id},onClick:async()=>{const r=await I(n.id);y(r,(()=>{v.success(e("global.delete_success")),B()}))}})]}})}})]}})})}})]}})}})]}})}))}}}));
